ğŸ“ Directory structure for './argo-cd'
./argo-cd
â”œâ”€â”€ apps
â”‚Â Â  â”œâ”€â”€ dev
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app-space-dev.yaml
â”‚Â Â  â”‚Â Â  â””â”€â”€ app-world-dev.yaml
â”‚Â Â  â””â”€â”€ pre
â”‚Â Â      â”œâ”€â”€ app-space-pre.yaml
â”‚Â Â      â””â”€â”€ app-world-pre.yaml
â”œâ”€â”€ projects
â”‚Â Â  â”œâ”€â”€ project-dev.yaml
â”‚Â Â  â””â”€â”€ project-pre.yaml
â””â”€â”€ roots
    â”œâ”€â”€ root-app-dev.yaml
    â””â”€â”€ root-app-pre.yaml

6 directories, 8 files

ğŸ“„ File contents within './argo-cd' (recursive)

==== ./argo-cd/roots/root-app-pre.yaml ====
# argo-cd/roots/root-app-pre.yaml
# Root application for the PRE environment using the "App of Apps" pattern
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: root-app-pre
  namespace: argocd
spec:
  project: pre-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git
    targetRevision: HEAD
    path: argo-cd/apps/pre
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
  syncPolicy:
    automated:
      prune: true
      selfHeal: true

==== ./argo-cd/roots/root-app-dev.yaml ====
# argo-cd/roots/root-app-dev.yaml
# Root application for the DEV environment using the "App of Apps" pattern
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: root-app-dev
  namespace: argocd
spec:
  project: dev-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git
    targetRevision: HEAD
    path: argo-cd/apps/dev
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
  syncPolicy:
    automated:
      prune: true
      selfHeal: true

==== ./argo-cd/projects/project-dev.yaml ====
# argo-cd/projects/project-dev.yaml
apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: dev-project
  namespace: argocd
spec:
  description: Development Project
  sourceRepos:
  - '*'
  destinations:
  - namespace: space-dev
    server: https://kubernetes.default.svc
  - namespace: world-dev
    server: https://kubernetes.default.svc
  - namespace: argocd
    server: https://kubernetes.default.svc
  clusterResourceWhitelist:
  - group: '*'
    kind: '*'
  namespaceResourceWhitelist:
  - group: '*'
    kind: '*'

==== ./argo-cd/projects/project-pre.yaml ====
# argo-cd/projects/project-pre.yaml
apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: pre-project
  namespace: argocd
spec:
  description: Pre-production Project
  sourceRepos:
  - '*'
  destinations:
  - namespace: space-pre
    server: https://kubernetes.default.svc
  - namespace: world-pre
    server: https://kubernetes.default.svc
  - namespace: argocd
    server: https://kubernetes.default.svc
  clusterResourceWhitelist:
  - group: '*'
    kind: '*'
  namespaceResourceWhitelist:
  - group: '*'
    kind: '*'

==== ./argo-cd/apps/pre/app-world-pre.yaml ====
# argo-cd/apps/pre/app-world-pre.yaml v1.0
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: app-world-pre
  namespace: argocd
spec:
  project: pre-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git # Replace with your repo URL
    targetRevision: HEAD
    # Path to the Kustomize overlay for this application and environment.
    path: kustomize/apps/world/overlays/pre
  destination:
    server: https://kubernetes.default.svc
    namespace: world-pre
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true

==== ./argo-cd/apps/pre/app-space-pre.yaml ====
# argo-cd/apps/pre/app-space-pre.yaml v1.0
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: app-space-pre
  namespace: argocd
spec:
  project: pre-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git # Replace with your repo URL
    targetRevision: HEAD
    # Path to the Kustomize overlay for this application and environment.
    path: kustomize/apps/space/overlays/pre
  destination:
    server: https://kubernetes.default.svc
    namespace: space-pre
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true

==== ./argo-cd/apps/dev/app-world-dev.yaml ====
# argo-cd/apps/dev/app-world-dev.yaml v1.0
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: app-world-dev
  namespace: argocd
spec:
  project: dev-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git # Replace with your repo URL
    targetRevision: HEAD
    # Path to the Kustomize overlay for this application and environment.
    path: kustomize/apps/world/overlays/dev
    # No plugin is needed, Argo CD will detect kustomization.yaml automatically.
  destination:
    server: https://kubernetes.default.svc
    namespace: world-dev
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true

==== ./argo-cd/apps/dev/app-space-dev.yaml ====
# argo-cd/apps/dev/app-space-dev.yaml v1.0
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: app-space-dev
  namespace: argocd
spec:
  project: dev-project
  source:
    repoURL: https://github.com/andres20980/gitops-poc.git # Replace with your repo URL
â€¦    syncOptions:
    - CreateNamespace=true
